{% extends "teacher_layout.html" %}

{% block title %}
    Home
{% endblock %}

{% block main %}
    <h1>
        <b> WELCOME, {{ name }} ! </b>
    </h1>
    <hr>

    <p>
        Thank you for being a teacher! This is an online educational platform that aims to provide basic education 
        to people who do not have access to education. We appreciate your time of volunteering in this platform 
        and may your hard work be rewarded one day :) 
    </p>
    
    <h5 class="subtitle" style="color:darkblue;">
        I register as a teacher for below subjects:     
    </h5>

    {% if count_teaching == 0 %}
    <p>
        You currently do not register for any subjects to be taught. 
        You may update this in "Profile" tab. 
    </p>
    {% else %}
        <table class="TFtable">
            <tr>
                <th>No.</th>
                <th>Subject</th>
                <th>Type</th>
            </tr>
            {% for row in teaching %}
            <tr>
                <td class="counterCell"></td>
                <td>{{ row["name"] }}</td>
                <td>{{ row["type"] }}</td>
            </tr>
            {% endfor %}
        </table>
    {% endif %}
    <br>

    {% if count_upcoming == 0 %}
    <h5 class="subtitle" >
        <span style="color:darkblue;"> My upcoming lessons: </span> 
    </h5>
    <p>
        You currently do not register for any subjects to be taught. 
        You may schedule a new lesson in "Schedule" tab. 
    </p>
    {% else %}
    <h5 class="subtitle" >
        <span style="color:darkblue;"> My upcoming lessons: </span> 
        <span style="font-size: smaller;"> Total of <b>{{ count_upcoming }} records </b> found </span> 
    </h5>
    {% for i in range (0, count_upcoming) %}
    <div class="card">
        <h5 class="card-header"> <strong>{{ upcoming[i]["name"] }}</strong>
            <span style="float: right;"> <b>Total Enrollment:</b> {{ count[i] }}</span></h5>
        <div class="card-body">
            <div class="row">
                <div class="col-md-5">
                <h6 class="card-title">
                    <table>
                        <tr>
                            <td><b>Date</b> &nbsp; &nbsp; </td>
                            <td>: </td>
                            <td>&nbsp; &nbsp; {{ upcoming[i]["date"] }}</td>
                        </tr>
                        <tr>
                            <td><b>Day</b> &nbsp; &nbsp; </td>
                            <td>: </td>
                            <td>&nbsp; &nbsp; {{ upcoming[i]["day"] }}</td>
                        </tr>
                        <tr>
                            <td><b>Time</b> &nbsp; &nbsp; </td>
                            <td>: </td>
                            <td>&nbsp; &nbsp; {{ upcoming[i]["time"] }} </td>
                        </tr>
                        <tr>
                            <td><b>Duration</b> &nbsp; &nbsp; </td>
                            <td>: </td>
                            <td>&nbsp; &nbsp; {{ upcoming[i]["duration_hour"] }} hour(s) and {{ upcoming[i]["duration_min"] }} min(s) </td>
                        </tr>
                    </table>
                </h6>
                </div>
                <div class="col-md-7">
                <h6 class="card-title">
                    <table>
                        <tr>
                            <td><b>Type</b> &nbsp; &nbsp; </td>
                            <td>: </td>
                            <td>&nbsp; &nbsp; {{ upcoming[i]["type"] }}</td>
                        </tr>
                        <tr>
                            <td><b>Subject</b> &nbsp; &nbsp; </td>
                            <td>: </td>
                            <td>&nbsp; &nbsp; {{ upcoming[i]["subject"] }}</td>
                        </tr>
                        <tr>
                            <td><b>Level</b> &nbsp; &nbsp; </td>
                            <td>: </td>
                            <td>&nbsp; &nbsp; {{ upcoming[i]["level"] }} </td>
                        </tr>
                    </table>
                </h6>
                </div>
            </div>
            <div class="card-text">
                <p><b>Details</b>: {{ upcoming[i]["message"] }}</p>
            </div>
            <div class="row">
                <div class="col-md-3">
                    <button class="btn btn-info btn-block" type="button" data-toggle="collapse" 
                    data-target="#collapseExample{{upcoming[i]['id']}}" aria-expanded="false" aria-controls="collapseExample">
                        View Students
                    </button>
                </div>
                <div class="col-md-2">
                    <form action="/update" method="POST">
                        <input type="hidden" name="class_id" value="{{ upcoming[i]['id'] }}">
                        <input type="hidden" name="name" value="{{ upcoming[i]['name'] }}">
                        <input type="hidden" name="date" value="{{ upcoming[i]['date'] }}">
                        <input type="hidden" name="day" value="{{ upcoming[i]['day'] }}">
                        <input type="hidden" name="time" value="{{ upcoming[i]['time'] }}">
                        <input type="hidden" name="duration_hour" value="{{ upcoming[i]['duration_hour'] }}">
                        <input type="hidden" name="duration_min" value="{{ upcoming[i]['duration_min'] }}">
                        <input type="hidden" name="type" value="{{ upcoming[i]['type'] }}">
                        <input type="hidden" name="subject" value="{{ upcoming[i]['subject'] }}">
                        <input type="hidden" name="level" value="{{ upcoming[i]['level'] }}">
                        <input type="hidden" name="message" value="{{ upcoming[i]['message'] }}">
                        <button type="submit" class="btn btn-success btn-block">Update Details</button>
                    </form>
                </div>
                <div class="col-md-2">
                    <form action="/cancel_confirm" method="POST">
                        <input type="hidden" name="name" value="{{ upcoming[i]['name'] }}">
                        <input type="hidden" name="date" value="{{ upcoming[i]['date'] }}">
                        <input type="hidden" name="day" value="{{ upcoming[i]['day'] }}">
                        <input type="hidden" name="time" value="{{ upcoming[i]['time'] }}">
                        <input type="hidden" name="duration_hour" value="{{ upcoming[i]['duration_hour'] }}">
                        <input type="hidden" name="duration_min" value="{{ upcoming[i]['duration_min'] }}">
                        <input type="hidden" name="type" value="{{ upcoming[i]['type'] }}">
                        <input type="hidden" name="subject" value="{{ upcoming[i]['subject'] }}">
                        <input type="hidden" name="level" value="{{ upcoming[i]['level'] }}">
                        <input type="hidden" name="message" value="{{ upcoming[i]['message'] }}">
                        <button type="submit" class="btn btn-danger btn-block">Cancel Class</button>
                    </form>
                </div>
            </div>
            <div class="row">
                <div class="col-md">
                    <div class="collapse" id="collapseExample{{upcoming[i]['id']}}">
                        <div class="card card-body">
                            
                            {% if count[i] == 0 %}
                            <p> No enrollment for this class yet! </p>
                            {% else %}
                            <table class="TFtable">
                                <tr>
                                    <th>No.</th>
                                    <th>Name</th>
                                    <th>Skype_id</th>
                                    <th>Occupation</th>
                                    <th>Organization</th>
                                </tr>
                                {% for row in students[i] %}
                                <tr>
                                    <td class="counterCell"></td>
                                    <td>{{ row["name"] }}</td>
                                    <td>{{ row["skype_id"] }}</td>
                                    <td>{{ row["occupation"] }}</td>
                                    <td>{{ row["organization"] }}</td>
                                </tr>
                                {% endfor %}
                            </table>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
           
        </div>
    </div>
    <br>    
    {% endfor %}
    {% endif %}
      
{% endblock %}